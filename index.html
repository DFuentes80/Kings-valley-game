<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>King's Valley</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .game-container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2.5rem; /* Increased padding */
            text-align: center;
            max-width: 90%; /* Responsive width */
            width: 500px; /* Max width for larger screens */
        }

        .game-title {
            font-size: 2.5rem; /* Larger title */
            font-weight: 700;
            color: #2c3e50; /* Darker title color */
            margin-bottom: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5x5 board */
            grid-template-rows: repeat(5, 1fr);
            width: 100%;
            max-width: 400px; /* Fixed size for the board itself */
            height: 400px;
            margin: 0 auto 2rem auto; /* Center board and add margin below */
            border: 6px solid #8e44ad; /* Purple border */
            border-radius: 0.75rem; /* Rounded board corners */
            overflow: hidden; /* Ensures pieces don't overflow rounded corners */
        }

        .square {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #34495e;
            box-sizing: border-box;
            border: 1px solid rgba(0, 0, 0, 0.1); /* Subtle grid lines */
        }

        .square:nth-child(odd) {
            background-color: #ecf0f1; /* Light gray */
        }

        .square:nth-child(even) {
            background-color: #bdc3c7; /* Slightly darker gray */
        }

        /* Center square - King's Valley */
        .square[data-row="2"][data-col="2"] {
            background-color: #f39c12; /* Orange for the King's Valley */
            color: #ffffff;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .piece {
            width: 80%;
            height: 80%;
            border-radius: 50%; /* Circular pieces */
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .piece:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .player-1 {
            background-color: #e74c3c; /* Red */
        }

        .player-2 {
            background-color: #3498db; /* Blue */
        }

        .player-1.king {
            background-color: #c0392b; /* Darker Red for King */
            border: 3px solid #f1c40f; /* Gold border for King */
            font-size: 1.5rem;
        }

        .player-2.king {
            background-color: #2980b9; /* Darker Blue for King */
            border: 3px solid #f1c40f; /* Gold border for King */
            font-size: 1.5rem;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .game-container {
                padding: 1.5rem;
            }
            .game-title {
                font-size: 2rem;
            }
            .board {
                max-width: 300px;
                height: 300px;
            }
            .square {
                font-size: 1.2rem;
            }
            .piece {
                font-size: 1rem;
            }
            .player-1.king, .player-2.king {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">King's Valley</h1>
        <div id="gameBoard" class="board">
            <!-- Board squares will be generated here by JavaScript -->
        </div>
        <div class="text-lg font-semibold text-gray-700">
            <p>Current Player: <span id="currentPlayerDisplay" class="text-red-500">Player 1</span></p>
            <p>Message: <span id="gameMessage" class="text-gray-600">Welcome to King's Valley!</span></p>
        </div>
    </div>

    <script>
        const boardElement = document.getElementById('gameBoard');
        const currentPlayerDisplay = document.getElementById('currentPlayerDisplay');
        const gameMessage = document.getElementById('gameMessage');

        // Represents the 5x5 game board
        // 0: empty, 1: Player 1 Soldier, 2: Player 2 Soldier, 1K: Player 1 King, 2K: Player 2 King
        let board = [
            [2, 2, '2K', 2, 2],
            [0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0], // Center square (2,2) is the King's Valley
            [0, 0, 0, 0, 0],
            [1, 1, '1K', 1, 1]
        ];

        let currentPlayer = 1; // 1 for Player 1, 2 for Player 2
        let selectedPiece = null; // To keep track of the piece currently selected

        // Function to render the board based on the 'board' array
        function renderBoard() {
            boardElement.innerHTML = ''; // Clear existing board
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 5; col++) {
                    const square = document.createElement('div');
                    square.classList.add('square');
                    square.dataset.row = row;
                    square.dataset.col = col;

                    const pieceType = board[row][col];
                    if (pieceType !== 0) {
                        const piece = document.createElement('div');
                        piece.classList.add('piece');
                        piece.dataset.row = row;
                        piece.dataset.col = col;

                        if (pieceType === 1) {
                            piece.classList.add('player-1');
                            piece.textContent = 'S'; // Soldier
                        } else if (pieceType === '1K') {
                            piece.classList.add('player-1', 'king');
                            piece.textContent = 'K'; // King
                        } else if (pieceType === 2) {
                            piece.classList.add('player-2');
                            piece.textContent = 'S'; // Soldier
                        } else if (pieceType === '2K') {
                            piece.classList.add('player-2', 'king');
                            piece.textContent = 'K'; // King
                        }
                        piece.addEventListener('click', handlePieceClick);
                        square.appendChild(piece);
                    }
                    square.addEventListener('click', handleSquareClick); // Add click listener to squares for movement
                    boardElement.appendChild(square);
                }
            }
            updateGameInfo();
        }

        // Handles clicking on a piece (to select it)
        function handlePieceClick(event) {
            const clickedPiece = event.target;
            const row = parseInt(clickedPiece.dataset.row);
            const col = parseInt(clickedPiece.dataset.col);
            const pieceType = board[row][col];

            // Check if it's the current player's piece
            if ((currentPlayer === 1 && (pieceType === 1 || pieceType === '1K')) ||
                (currentPlayer === 2 && (pieceType === 2 || pieceType === '2K'))) {

                if (selectedPiece) {
                    // Deselect previously selected piece
                    selectedPiece.classList.remove('border-4', 'border-yellow-400');
                }
                selectedPiece = clickedPiece;
                selectedPiece.classList.add('border-4', 'border-yellow-400'); // Highlight selected piece
                gameMessage.textContent = `Piece selected at (${row}, ${col}). Now click an empty square to move.`;
            } else {
                gameMessage.textContent = "That's not your piece, or it's not your turn!";
            }
        }

        // Handles clicking on a square (to move to it)
        function handleSquareClick(event) {
            const clickedSquare = event.currentTarget; // Use currentTarget to get the square div
            const targetRow = parseInt(clickedSquare.dataset.row);
            const targetCol = parseInt(clickedSquare.dataset.col);

            if (selectedPiece) {
                const startRow = parseInt(selectedPiece.dataset.row);
                const startCol = parseInt(selectedPiece.dataset.col);

                // Basic validation: Must be an empty square
                if (board[targetRow][targetCol] === 0) {
                    // For now, we'll allow any move to an empty square.
                    // Later, you'll add King's Valley specific movement rules here.
                    // Example: Check if move is horizontal, vertical, or diagonal and slides to obstacle/edge.

                    // Move the piece in the board array
                    board[targetRow][targetCol] = board[startRow][startCol];
                    board[startRow][startCol] = 0; // Clear the old position

                    // Deselect piece and re-render board
                    selectedPiece.classList.remove('border-4', 'border-yellow-400');
                    selectedPiece = null;
                    
                    // Switch turn
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                    gameMessage.textContent = "Piece moved! Now it's the other player's turn.";
                    renderBoard(); // Re-render the board to show the new position
                } else {
                    gameMessage.textContent = "That square is not empty. Please select an empty square.";
                }
            } else {
                gameMessage.textContent = "Select a piece first!";
            }
        }

        // Updates the display for current player and messages
        function updateGameInfo() {
            currentPlayerDisplay.textContent = `Player ${currentPlayer}`;
            currentPlayerDisplay.classList.remove('text-red-500', 'text-blue-500');
            if (currentPlayer === 1) {
                currentPlayerDisplay.classList.add('text-red-500');
            } else {
                currentPlayerDisplay.classList.add('text-blue-500');
            }
        }

        // Initial render when the page loads
        document.addEventListener('DOMContentLoaded', renderBoard);
    </script>
</body>
</html>
